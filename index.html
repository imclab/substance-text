<html>
<head>
  <title>Text</title>

  <link href='http://fonts.googleapis.com/css?family=Merriweather:400,700,300,900' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="stylesheets/text.css">
  <!-- Libs -->
  <script type="text/javascript" src="lib/underscore.js"></script>
  <script type="text/javascript" src="lib/jquery-min.js"></script>
  <script type="text/javascript" src="lib/dmp.js"></script>
  <script type="text/javascript" src="lib/rangy/core.js"></script>
  <script type="text/javascript" src="lib/rangy/dom.js"></script>
  <script type="text/javascript" src="lib/rangy/domrange.js"></script>
  <script type="text/javascript" src="lib/rangy/wrappedrange.js"></script>
  <script type="text/javascript" src="lib/rangy/wrappedselection.js"></script>
  <script type="text/javascript" src="lib/rangy/cssclassapplier.js"></script>

  <!-- Templates -->
  <script type="text/html" name="toolbar">
    <div id="toolbar"></div>
  </script>
 
  <script type="text/html" name="tool">
    <a class="tool" data-command="<%= type %>" href="#<%= type %>"><%= text %></a>
  </script>
  
  <!-- 
  <script type="text/html" name=""></script>
   -->

  <!-- Source -->
  <script type="text/plain" name="content">helo World</script>
  
  
  <script type="text/javascript" src="lib/surface.js"></script>
  <script type="text/javascript" src="text.js"></script>

  <script type="text/javascript">
    $(function() {
      var text = new Substance.Text({
        el: "#content", 
        content: $('script[name=content]').text(), 
        annotations: [
        //     {
        //       "id": "a:1",
        //       "type": "comment",
        //       "pos": [0,10],
        //       "properties": {"content": "This is a comment for you"}
        //     },
        //     {
        //       "id": "a:2",
        //       "type": "em",
        //       "pos": [20,24]
        //     }
        //   
        ]
      });

      // Debug
      // --------------

      text.on('text:change', function(delta, content) {
        console.log("DELTA", delta);
        console.log("NEW CONTENT:", content);
      });

    });
  </script>
</head>
<body>
    <div id="content" class="content" contenteditable="true"></div>
    <div class="clear"></div>
</body>